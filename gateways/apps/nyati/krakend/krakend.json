
{
  "$schema": "https://www.krakend.io/schema/v2.5/krakend.json",
  "version": 3,
  "name": "Microservices-suite API Gateway",
  "port": 9001,
  "cache_ttl": "3600s",
  "timeout": "300s",
  "endpoints": [
    {
      "@comment": "Check the health of all your APIs",
      "endpoint": "/__suite_status",
      "method": "GET",
      "backend": [
    {
      "host": ["http://notification:9001"],
      "url_pattern": "/",
      "mapping": {
        "message": "notification"
      }
    },

    {
      "host": ["http://payment:9002"],
      "url_pattern": "/",
      "mapping": {
        "message": "payment"
      }
    }]
    },
    {
      "@comment": "Hit all API list endpoints simultaneously",
      "endpoint": "/api/v1/",
      "method": "GET",
      "backend": [
    {
      "host": ["http://notification:9001"],
      "url_pattern": "/api/v1/notifications",
      "mapping": {
        "data": "notifications"
      }
    },

    {
      "host": ["http://payment:9002"],
      "url_pattern": "/api/v1/payments",
      "mapping": {
        "data": "payments"
      }
    }]
    },
    {
      "@comment": "Fetch all data from the notification service",
      "endpoint": "/api/v1/notifications",
      "method": "GET",
      "backend": [
    {
      "host": ["http://notification:9001"],
      "url_pattern": "/api/v1/notifications",
      "mapping": {
        "data": "notifications"
      }
    }]
    }
  ]
}